[pytest]
# 用例发现
testpaths = test_cases
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 标记（含用例优先级 P0 > P1 > P2，abnormal 异常/边界用例）
markers =
    rest: REST API 接口用例
    websocket: WebSocket 接口用例
    smoke: 冒烟用例
    P0: 优先级 P0（最高，冒烟/核心）
    P1: 优先级 P1（重要）
    P2: 优先级 P2（一般）
    abnormal: 异常/边界用例（缺参、非法参数、非法区间等）

# 日志
log_cli = true
log_cli_level = INFO
log_cli_format = [%(asctime)s] [%(levelname)s] %(message)s
log_file = logs/pytest_run.log
log_file_level = DEBUG
log_file_format = [%(asctime)s] [%(levelname)s] [%(name)s] %(message)s

# Allure
# -s 关闭 stdout 捕获，便于看到 print（如 book.update 后续消息打印）
addopts = -v -s --tb=short --alluredir=reports/allure-results --clean-alluredir
